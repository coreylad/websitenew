var autoHook=true;var defaultOptions={animate:true,showText:true,width:120,boxImage:"images/bramus/percentImage.png",barImage:"images/bramus/percentImage_back.png",height:12};if(!JS_BRAMUS){var JS_BRAMUS=new Object()}JS_BRAMUS.jsProgressBar=Class.create();JS_BRAMUS.jsProgressBar.prototype={el:null,id:null,percentage:null,options:null,initialPos:null,pxPerPercent:null,backIndex:null,running:null,queue:false,initialize:function(C,A,B){this.options=Object.clone(defaultOptions);Object.extend(this.options,B||{});this.el=C;this.id=C.id;this.percentage=0;this.backIndex=0;this.running=false;this.queue=Array();this.imgWidth=this.options.width*2;this.initialPos=this.options.width*(-1);this.pxPerPercent=this.options.width/100;if(this.options.barImage.constructor!=Array){this.options.barImage=Array(this.options.barImage)}this.el.update('<img id="'+this.id+'_percentImage" src="'+this.options.boxImage+'" alt="0%" style="width: '+this.options.width+"px; height: "+this.options.height+"px; background-position: "+this.initialPos+"px 50%; background-image: url("+this.options.barImage[this.backIndex]+'); padding: 0; margin: 0;"/>'+((this.options.showText==true)?'<span id="'+this.id+'_percentText">0%</span>':""));this.setPercentage(A)},setPercentage:function(A){this.queue.push(A);if(this.running==false){this.processQueue()}},processQueue:function(){if(this.queue.length>0){this.running=true;this.processQueueEntry(this.queue[0])}else{return }},processQueueEntry:function(B){var A=this.percentage;if((B.toString().substring(0,1)=="+")||(B.toString().substring(0,1)=="-")){B=A+parseInt(B)}if(B<0){B=0}if(B>100){B=100}if(this.options.animate==false){this.queue.splice(0,1);this._setBgPosition(B);this.running=false;this.processQueue();return }if(B!=A){if(A<B){newPercentage=A+1}else{newPercentage=A-1}}else{newPercentage=A}this._setBgPosition(newPercentage);if(A!=newPercentage){setTimeout(function(){this.processQueueEntry(B)}.bind(this),10)}else{this.queue.splice(0,1);this.running=false;this.processQueue();return }},getPercentage:function(A){return this.percentage},_setBgPosition:function(A){$(this.id+"_percentImage").style.backgroundPosition=""+(this.initialPos+(A*this.pxPerPercent))+"px 50%";var B=Math.floor((A-1)/(100/this.options.barImage.length));if((B!=this.backIndex)&&(this.options.barImage[B]!=undefined)){$(this.id+"_percentImage").style.backgroundImage="url("+this.options.barImage[B]+")"}this.backIndex=B;$(this.id+"_percentImage").alt=""+A+"%";$(this.id+"_percentImage").title=""+A+"%";if(this.options.showText==true){$(this.id+"_percentText").update(""+A+"%")}this.percentage=A}};JS_BRAMUS.jsProgressBarHandler=Class.create();JS_BRAMUS.jsProgressBarHandler.prototype={pbArray:new Array(),initialize:function(){$$("span.progressBar").each(function(A){this.pbArray[A.id]=new JS_BRAMUS.jsProgressBar(A,parseInt(A.innerHTML.replace("%","")))}.bind(this))},setPercentage:function(B,A){this.pbArray[B].setPercentage(A)},getPercentage:function(A){return this.pbArray[A].getPercentage()}};if(autoHook==true){function initProgressBarHandler(){myJsProgressBarHandler=new JS_BRAMUS.jsProgressBarHandler()}Event.observe(window,"load",initProgressBarHandler,false)};